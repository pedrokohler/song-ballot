(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{58:function(n,t,e){"use strict";var i=e(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(e(14)),o=i(e(15)),u=i(e(68)),s=i(e(64)),a=i(e(72)),l=i(e(65)),d=i(e(66)),c=i(e(67)),h=i(e(63)),f=e(69);e(77),e(73),e(71),e(90),e(82);var p=e(29),m=i(e(76)),v=i(e(70)),b=e(22),g=e(20);function y(){var n=(0,u.default)(['\n      <tr>\n        <td>\n          <p style="text-align: left">',"</p>\n        </td>\n        <td>\n          <p>","</p>\n        </td>\n        <td>\n          <p>","</p>\n        </td>\n      </tr>\n    "]);return y=function(){return n},n}function x(){var n=(0,u.default)(['\n      <section class="submission-status-header">\n        <h4 class="display-name">',"</h4>\n        <a href=",' target="_blank">\n          <p>',"</p>\n        </a>\n      </section>\n      <h5>Nota Final</h5>\n      <p>","</p>\n      <h5>Pontuação Total</h5>\n      <p>","</p>\n      <h5>Penalidade</h5>\n      <p>","</p>\n      <table>\n          <thead>\n            <tr>\n              <th><h5>Avaliador</h5></th>\n              <th><h5>Pontos</h5></th>\n              <th><h5>Já conhecia?</h5></th>\n            </tr>\n          </thead>\n          <tbody>\n            ","\n          </tbody>\n      </table>\n    "]);return x=function(){return n},n}function R(){var n=(0,u.default)(["\n        <blurred-component>\n          ","\n        </blurred-component>\n      "]);return R=function(){return n},n}function k(){var n=(0,u.default)(["\n        ","\n      "]);return k=function(){return n},n}function w(){var n=(0,u.default)(['\n      <section class="player-ranking-section">\n        <h5>',"</h5>\n        <p>","</p>\n        <a href=",' target="_blank">\n          <p>',"</p>\n        </a>\n      </section>\n    "]);return w=function(){return n},n}function T(){var n=(0,u.default)(["\n      ","\n      ","\n      ","\n    "]);return T=function(){return n},n}function S(){var n=(0,u.default)(["\n        <blurred-component>\n          ","\n        </blurred-component>\n      "]);return S=function(){return n},n}function N(){var n=(0,u.default)(["\n        ","\n      "]);return N=function(){return n},n}function D(){var n=(0,u.default)(['\n      <navigation-buttons\n        forwardArrowsAlt="ir para próximo round"\n        ?forwardArrowsDisabled="','"\n        @forward-arrows-clicked="','"\n\n        backwardArrowsAlt="ir para round anterior"\n        ?backwardArrowsDisabled="','"\n        @backward-arrows-clicked="','"\n      >\n      </navigation-buttons>\n    ']);return D=function(){return n},n}function I(){var n=(0,u.default)(['\n      <navigation-buttons\n        forwardArrowsAlt="ir para próxima música"\n        ?forwardArrowsDisabled="','"\n        @forward-arrows-clicked="','"\n\n        backwardArrowsAlt="ir para música anterior"\n        ?backwardArrowsDisabled="','"\n        @backward-arrows-clicked="','"\n      >\n      </navigation-buttons>\n    ']);return I=function(){return n},n}function O(){var n=(0,u.default)(['\n        <default-background>\n            <section class="shell">\n                <h3>Resultado',"da rodada</h3>\n                <h4>Semana ","</h4>\n                ","\n                ",'\n            </section>\n            <section class="shell">\n                <h3>Avaliação das músicas</h3>\n                ',"\n                ","\n            </section>\n        </default-background>\n    "]);return O=function(){return n},n}function A(){var n=(0,u.default)(['\n        <paper-progress class="blue" indeterminate></paper-progress>\n      ']);return A=function(){return n},n}function P(){var n=(0,u.default)(["\n        .shell {\n            font-size: 120%;\n            border-radius: 3px;\n            min-height: 200px;\n            height: inherit;\n            width: 90%;\n            min-width: 300px;\n            max-width: 600px;\n            background-color: #FFFFFF;\n            margin-bottom: 20px;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: space-between;\n            padding: 25px;\n            padding-top: 20px;\n            box-sizing: border-box;\n        }\n\n        h1,h2,h3,h4,h5,h6,p {\n            margin-top: 0;\n            margin-bottom: 0.6em;\n            text-align: center;\n        }\n\n        .display-name {\n          text-align: left;\n          font-size: 0.8em;\n        }\n\n        p {\n            font-size: 0.8em;\n            font-weight: 300;\n            margin-bottom: 0.1em;\n        }\n\n        h5 {\n            margin-top: 0.6em;\n        }\n\n        h3, div {\n            margin-right: auto;\n        }\n\n        hr {\n            border: none;\n            width: 85%;\n            height: 1px;\n            margin-bottom: 20px;\n            background-color: rgba(0, 0, 0, 0.2);\n        }\n\n        h4 {\n            font-weight: 500;\n            text-transform: uppercase;\n        }\n\n        div h4 {\n            margin-bottom: 0;\n            text-transform: none;\n            text-align: left;\n        }\n\n        div h6 {\n            margin-top: 0;\n            font-weight: 400;\n            text-align: left;\n            margin-bottom: 1em;\n        }\n\n        paper-progress {\n          width: 100vw;\n          --paper-progress-active-color: #FBC303;\n        }\n\n        blurred-component {\n          display: inherit;\n          flex-direction: inherit;\n          align-items: inherit;\n          justify-content: inherit;\n          box-sizing: inherit;\n          width: 100%;\n          height: 100%;\n          margin: 0;\n          padding: 0;\n          word-break: break-word;\n        }\n\n        blurred-component a, blurred-component a:visited {\n          text-decoration: inherit;\n          color: inherit;\n          cursor: auto;\n          pointer-events: none;\n        }\n\n        .submission-status-header {\n          margin-bottom: 1em;\n          font-size: 1em;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n        }\n\n        @media only screen and (max-width: 600px) {\n          .shell {\n              font-size: 100%;\n          }\n          .submission-status-header {\n            font-size: 1em;\n          }\n        }\n\n        .player-ranking-section {\n          margin-bottom: 1em;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n        }\n\n        a {\n          color: #FBC303;\n        }\n    "]);return P=function(){return n},n}function L(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var e,i=(0,h.default)(n);if(t){var r=(0,h.default)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,c.default)(this,e)}}var B=function(n){(0,d.default)(m,n);var t,e,i,u,c=L(m);function m(){var n;return(0,s.default)(this,m),(n=c.call(this)).isLoading=!0,n.submissionIndex=0,n.roundIndex=0,n.hasPlayerVotedThisRound=!1,n.maxRoundIndex=1/0,n.hasOngoingRequest=!1,n}return(0,l.default)(m,null,[{key:"styles",get:function(){return(0,f.css)(P())}}]),(0,l.default)(m,[{key:"render",value:function(){return this.isLoading?(0,f.html)(A()):(0,f.html)(O(),this.isOngoingRound?" parcial ":" ",this.startDate,this.roundOverViewTemplate(),this.roundNavigationSectionTemplate(),this.submissionOverviewTemplate(),this.submissionNavigationSectionTemplate())}},{key:"submissionNavigationSectionTemplate",value:function(){var n=this;return(0,f.html)(I(),this.shouldDisableNextSubmissionButton(),(function(){n.submissionIndex+=1}),this.shouldDisablePreviousSubmissionButton(),(function(){n.submissionIndex-=1}))}},{key:"roundNavigationSectionTemplate",value:function(){return(0,f.html)(D(),this.shouldDisableNextRoundButton(),this.onNextRoundClick.bind(this),this.shouldDisablePreviousRoundButton(),this.onPreviousRoundClick.bind(this))}},{key:"roundOverViewTemplate",value:function(){return this.canSeeCurrentRoundResults?(0,f.html)(N(),this.playerRankingOverview()):(0,f.html)(S(),this.playerRankingOverview())}},{key:"playerRankingOverview",value:function(){return(0,f.html)(T(),this.playerRankingTemplate("Vencedor","firstPlace"),this.playerRankingTemplate("Segundo colocado","secondPlace"),this.playerRankingTemplate("Último colocado","lastPlace"))}},{key:"playerRankingTemplate",value:function(n,t){var e,i,r,o,u,s=null===(e=this.currentRound)||void 0===e||null===(i=e[t])||void 0===i?void 0:i.song;return(0,f.html)(w(),n,null===(r=this.currentRound)||void 0===r||null===(o=r[t])||void 0===o||null===(u=o.submitter)||void 0===u?void 0:u.displayName,this.getDirectYoutubeUrl(null==s?void 0:s.id),null==s?void 0:s.title)}},{key:"submissionOverviewTemplate",value:function(){return this.canSeeCurrentRoundResults?(0,f.html)(k(),this.submissionStatusTemplate()):(0,f.html)(R(),this.submissionStatusTemplate())}},{key:"submissionStatusTemplate",value:function(){var n,t,e,i,r,o,u,s,a,l,d;return(0,f.html)(x(),null===(n=this.currentSubmission)||void 0===n||null===(t=n.submitter)||void 0===t?void 0:t.displayName,this.getDirectYoutubeUrl(null===(e=this.currentSubmission)||void 0===e||null===(i=e.song)||void 0===i?void 0:i.id),null===(r=this.currentSubmission)||void 0===r||null===(o=r.song)||void 0===o?void 0:o.title,null===(u=this.currentSubmission)||void 0===u?void 0:u.points,null===(s=this.currentSubmission)||void 0===s?void 0:s.total,-(null===(a=this.currentSubmission)||void 0===a?void 0:a.penalty),null===(l=this.currentSubmission)||void 0===l||null===(d=l.evaluations)||void 0===d?void 0:d.map(this.tableRowTemplate))}},{key:"tableRowTemplate",value:function(n){var t=n.score,e=n.ratedFamous,i=n.evaluator.displayName;return(0,f.html)(y(),i,t,e?"Sim":"Não")}},{key:"firstUpdated",value:(u=(0,o.default)(r.default.mark((function n(t){return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,a.default)((0,h.default)(m.prototype),"firstUpdated",this).call(this,t);case 2:this.hasPlayerVotedThisRound=this.checkHasPlayerVotedThisRound(),this.hasPlayerVotedThisRound||this.safeOpenAlertModal(this.alertCodes.HAS_NOT_VOTED),this.updateSubmissions(p.store.ongoingRound.id),this.isLoading=!1;case 6:case"end":return n.stop()}}),n,this)}))),function(n){return u.apply(this,arguments)})},{key:"checkHasPlayerVotedThisRound",value:function(){return Array.from(p.store.ongoingRound.evaluations.values()).some((function(n){return n.evaluator.id===p.store.currentUser.id}))}},{key:"updateSubmissions",value:function(n){var t,e;this.submissions=Array.from(null===(t=p.store.rounds.get(n))||void 0===t||null===(e=t.submissions)||void 0===e?void 0:e.values()).sort(g.rankSubmissions)}},{key:"getDirectYoutubeUrl",value:function(n){return"https://youtube.com/watch?v=".concat(n)}},{key:"onNextRoundClick",value:(i=(0,o.default)(r.default.mark((function n(){return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(this.lastRoundIndex>this.roundIndex)){n.next=3;break}return this.shiftRoundBy(1),n.abrupt("return");case 3:return n.next=5,this.onIsLastRoundLoaded();case 5:case"end":return n.stop()}}),n,this)}))),function(){return i.apply(this,arguments)})},{key:"onIsLastRoundLoaded",value:(e=(0,o.default)(r.default.mark((function n(){return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.hasOngoingRequest=!0,n.next=3,this.maybeLoadNextRound();case 3:this.hasOngoingRequest=!1,this.lastRoundIndex>this.roundIndex?this.shiftRoundBy(1):this.onRoundLimitReached();case 5:case"end":return n.stop()}}),n,this)}))),function(){return e.apply(this,arguments)})},{key:"maybeLoadNextRound",value:(t=(0,o.default)(r.default.mark((function n(){return r.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.store.maybeLoadNextPaginatedRound((0,b.getFirebaseTimestamp)(this.currentRound.submissionsStartAt));case 2:case"end":return n.stop()}}),n,this)}))),function(){return t.apply(this,arguments)})},{key:"onPreviousRoundClick",value:function(){this.shiftRoundBy(-1)}},{key:"shiftRoundBy",value:function(n){this.roundIndex+=n,this.submissionIndex=0,this.updateSubmissions(this.currentRound.id)}},{key:"onRoundLimitReached",value:function(){this.maxRoundIndex=this.lastRoundIndex,this.safeOpenAlertModal(this.alertCodes.FIRST_ROUND_REACHED)}},{key:"shouldDisableNextSubmissionButton",value:function(){var n,t=this.submissionIndex>=(null===(n=this.submissions)||void 0===n?void 0:n.length)-1;return!this.canSeeCurrentRoundResults||t||this.hasOngoingRequest}},{key:"shouldDisablePreviousSubmissionButton",value:function(){var n=this.submissionIndex<=0;return!this.canSeeCurrentRoundResults||n||this.hasOngoingRequest}},{key:"shouldDisablePreviousRoundButton",value:function(){return this.roundIndex<=0||this.hasOngoingRequest}},{key:"shouldDisableNextRoundButton",value:function(){return this.roundIndex>=this.maxRoundIndex||this.hasOngoingRequest}},{key:"rounds",get:function(){return Array.from(p.store.rounds.values())}},{key:"lastRoundIndex",get:function(){return this.rounds.length-1}},{key:"currentRound",get:function(){var n;return null===(n=this.rounds)||void 0===n?void 0:n[this.roundIndex]}},{key:"currentSubmission",get:function(){var n;return null===(n=this.submissions)||void 0===n?void 0:n[this.submissionIndex]}},{key:"canSeeCurrentRoundResults",get:function(){return!this.isOngoingRound||this.hasPlayerVotedThisRound}},{key:"startDate",get:function(){return(this.currentRound||{submissionsStartAt:new Date}).submissionsStartAt.toLocaleDateString()}},{key:"isOngoingRound",get:function(){return this.currentRound.id===p.store.ongoingRound.id}}],[{key:"properties",get:function(){return{isLoading:{type:Boolean},submissionIndex:{type:Number},roundIndex:{type:Number},maxRoundIndex:{type:Number},hasPlayerVotedThisRound:{type:Boolean},hasOngoingRequest:{type:Boolean}}}}]),m}((0,v.default)((0,m.default)(f.LitElement)));t.default=B,window.customElements.define("results-page",B)},90:function(n,t,e){"use strict";var i=e(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(e(68)),o=i(e(64)),u=i(e(65)),s=i(e(72)),a=i(e(66)),l=i(e(67)),d=i(e(63)),c=e(69);function h(){var n=(0,r.default)(["\n        .blurred {\n            color: transparent;\n            text-shadow: 0 0 5px rgba(0,0,0,0.5);\n            user-select: none;\n        }\n    "]);return h=function(){return n},n}function f(){var n=(0,r.default)(['\n            <slot class="blurred"></slot>\n        ']);return f=function(){return n},n}function p(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}();return function(){var e,i=(0,d.default)(n);if(t){var r=(0,d.default)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,l.default)(this,e)}}var m=function(n){(0,a.default)(e,n);var t=p(e);function e(){return(0,o.default)(this,e),t.apply(this,arguments)}return(0,u.default)(e,[{key:"render",value:function(){return(0,c.html)(f())}},{key:"firstUpdated",value:function(n){(0,s.default)((0,d.default)(e.prototype),"firstUpdated",this).call(this,n),this.scrambleText()}},{key:"scrambleText",value:function(){this.updateText((function(n){return btoa(n)}))}},{key:"updateText",value:function(n){var t=this.shadowRoot.querySelector("slot"),e=Array.from(t.assignedNodes()).filter((function(n){return n.nodeType!==Node.TEXT_NODE}));this.handleHTMLNodes(n,e)}},{key:"processLeafText",value:function(n){return function(t){var e=t.innerText;t.innerText=n(e)}}},{key:"processSubtreeText",value:function(n){var t=this;return function(e){var i=Array.from(e.childNodes).filter((function(n){return n.nodeType!==Node.TEXT_NODE}));t.handleHTMLNodes(n,i)}}},{key:"handleHTMLNodes",value:function(n,t){var e=t.filter((function(n){return n.childElementCount>0}));t.filter((function(n){return 0===n.childElementCount})).forEach(this.processLeafText(n)),e.forEach(this.processSubtreeText(n))}}],[{key:"styles",get:function(){return(0,c.css)(h())}}]),e}(c.LitElement);t.default=m,customElements.define("blurred-component",m)}}]);