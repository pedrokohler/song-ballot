(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{55:function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(67)),i=r(n(63)),s=r(n(64)),a=r(n(65)),u=r(n(66)),c=r(n(62)),d=n(68);n(76),n(72),n(70),n(77);var l=r(n(69)),f=r(n(75));function h(){var e=(0,o.default)(["\n        section {\n            border-radius: 3px;\n            min-height: 200px;\n            height: inherit;\n            width: 90%;\n            min-width: 300px;\n            max-width: 600px;\n            background-color: #FFFFFF;\n            margin-bottom: 20px;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: space-between;\n            padding: 25px;\n            padding-top: 20px;\n            box-sizing: border-box;\n        }\n\n        h1,h2,h3,h4,h5,h6,p {\n            margin-top: 0;\n            margin-bottom: 0.6em;\n            text-align: center;\n        }\n\n        h3, div {\n            margin-right: auto;\n        }\n\n        hr {\n            border: none;\n            width: 85%;\n            height: 1px;\n            margin-bottom: 20px;\n            background-color: rgba(0, 0, 0, 0.2);\n        }\n\n        h4 {\n            font-weight: 500;\n            text-transform: uppercase;\n        }\n\n        div h4 {\n            margin-bottom: 0;\n            text-transform: none;\n            text-align: left;\n        }\n\n        div h6 {\n            margin-top: 0;\n            font-weight: 400;\n            text-align: left;\n            margin-bottom: 1em;\n        }\n\n        input {\n            height: 1.5em;\n            width: calc(100% - 4px);\n            border-radius: 3px;\n            margin-bottom: 1em;\n            font-family: inherit;\n            border-style: solid;\n            border-width: 1px;\n            font-size: 1em;\n            background-color: #F2F2F2;\n        }\n\n        button {\n            margin-right: auto;\n            margin-bottom: 1em;\n            width: 100px;\n            height: 35px;\n            text-transform: uppercase;\n            background-color: #FBC303;\n            font-weight: 900;\n            font-family: inherit;\n            border: none;\n            border-radius: 3px;\n            vertical-align: baseline;\n            cursor: pointer;\n        }\n\n        iframe {\n            width: 100%;\n            height: 300px;\n            max-height: 50%;\n            margin-bottom: 1em;\n        }\n\n        paper-progress {\n          width: 100vw;\n          --paper-progress-active-color: #FBC303;\n        }\n    "]);return h=function(){return e},e}function p(){var e=(0,o.default)(["\n        <hr/>\n        <h4>","</h4>\n        <iframe src=",' frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n        <button\n            @click=',"\n            ?disabled=","\n        >\n        Enviar\n        </button>\n    "]);return p=function(){return e},e}function g(){var e=(0,o.default)(["\n        <default-background>\n            <section>\n                <h3>Enviar música</h3>\n                <h4>Semana ","</h4>\n                <p>O limite para envio da música é até "," de ",'</p>\n                <hr/>\n                <div>\n                    <h4>Carregar música</h4>\n                    <h6>Insira o link do vídeo do Youtube</h6>\n                </div>\n                <input type="url"/>\n                <button\n                  @click="','"\n                  ?disabled=',"\n                >Carregar</button>\n                ","\n            </section>\n        </default-background>\n    "]);return g=function(){return e},e}function m(){var e=(0,o.default)(['\n        <paper-progress class="blue" indeterminate></paper-progress>\n      ']);return m=function(){return e},e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var b=function(e){(0,a.default)(n,e);var t=v(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){return this.isLoading?(0,d.html)(m()):(0,d.html)(g(),this.startDateString,this.endTimeString,this.endWeekdayString,this.handleConfirmationClick,this.hasOngoingRequest,this.videoId?this.videoTemplate():"")}},{key:"videoTemplate",value:function(){return(0,d.html)(p(),this.videoTitle,this.videoURL,this.handleSendVideoClick,this.hasOngoingRequest)}}],[{key:"styles",get:function(){return(0,d.css)(h())}}]),n}((0,r(n(85)).default)((0,l.default)((0,f.default)(d.LitElement))));t.default=b,window.customElements.define("send-song-page",b)},69:function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(e){(0,s.default)(c,e);var t,n,r=(t=c,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,u.default)(t);if(n){var o=(0,u.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,a.default)(this,e)});function c(){return(0,o.default)(this,c),r.apply(this,arguments)}return(0,i.default)(c,[{key:"generateAlerts",value:function(){return new Map([[this.alertCodes.HAS_NOT_VOTED,{needsErrorMessage:!1,messageGenerator:function(){return"Você só poderá ver os resultados desta rodada após votar."},onButtonClicked:this.closeModal}],[this.alertCodes.FIRST_ROUND_REACHED,{needsErrorMessage:!1,messageGenerator:function(){return"Você já viu todos os resultados disponíveis."},onButtonClicked:this.closeModal}],[this.alertCodes.EVALUATION_PERIOD_OVER,{needsErrorMessage:!1,messageGenerator:function(){return"O período para votar acabou ".concat(this.endWeekday," às ").concat(this.endTime,".")},onButtonClicked:this.goToMenu}],[this.alertCodes.EVALUATION_PERIOD_NOT_STARTED,{needsErrorMessage:!1,messageGenerator:function(){return"O período para votar começa ".concat(this.startWeekday," às ").concat(this.startTime,".")},onButtonClicked:this.goToMenu}],[this.alertCodes.ALREADY_EVALUATED,{needsErrorMessage:!1,messageGenerator:function(){return"Você já votou esta semana."},onButtonClicked:this.goToMenu}],[this.alertCodes.NO_SONGS,{needsErrorMessage:!1,messageGenerator:function(){return"Não há músicas para votar."},onButtonClicked:this.goToMenu}],[this.alertCodes.EVALUATION_FAILED,{needsErrorMessage:!1,messageGenerator:function(){return"Houve um problema ao tentar enviar seu voto. Tente novamente mais tarde."},onButtonClicked:this.closeModal}],[this.alertCodes.INVALID_SCORE,{needsErrorMessage:!1,messageGenerator:function(){return"Você não pontuou todas as músicas com um valor válido."},onButtonClicked:this.closeModal}],[this.alertCodes.VOTE_SUCCESS,{needsErrorMessage:!1,messageGenerator:function(){return"Voto enviado com sucesso!"},onButtonClicked:this.goToMenu}],[this.alertCodes.SUBMISSION_PERIOD_OVER,{needsErrorMessage:!1,messageGenerator:function(){return"O período para enviar músicas acabou ".concat(this.endWeekdayString," ").concat(this.endTimeString,".")},onButtonClicked:this.goToMenu}],[this.alertCodes.MAX_NUMBER_OF_SONGS,{needsErrorMessage:!1,messageGenerator:function(){return"Você já enviou o número máximo de músicas para esta rodada"},onButtonClicked:this.goToMenu}],[this.alertCodes.INVALID_URL,{needsErrorMessage:!1,messageGenerator:function(){return"O URL que você inseriu não é valido."},onButtonClicked:this.closeModal}],[this.alertCodes.SUBMISSION_SUCCESS,{needsErrorMessage:!1,messageGenerator:function(){return"Música enviada com sucesso! ".concat(this.userSubmissionsSent<this.userSubmissionsLimit?"Você ainda pode enviar mais uma música!":"")},onButtonClicked:this.goToMenu}],[this.alertCodes.SAVE_BOT_SETTINGS_SUCCESS,{needsErrorMessage:!1,messageGenerator:function(){return"Suas configurações do Bot foram salvas com sucesso!"},onButtonClicked:this.goToMenu}],[this.alertCodes.SAVE_BOT_SETTINGS_ERROR,{needsErrorMessage:!1,messageGenerator:function(){return"Houve um problema ao salvar as suas configurações do Bot."},onButtonClicked:this.closeModal}],[this.alertCodes.DUPLICATED_SONG,{needsErrorMessage:!1,messageGenerator:function(){return"A música que você enviou já foi enviada antes. Tente outra música."},onButtonClicked:this.closeModal}],[this.alertCodes.UNEXPECTED_ERROR_GO_MENU,{needsErrorMessage:!0,messageGenerator:function(e){return e},onButtonClicked:this.goToMenu}],[this.alertCodes.UNEXPECTED_ERROR_CLOSE_MODAL,{needsErrorMessage:!0,messageGenerator:function(e){return e},onButtonClicked:this.closeModal}]])}},{key:"openAlertModal",value:function(e,t){var n=this.generateAlerts();if(!n.has(e))throw new Error("openAlertModal: Invalid alertCode. '".concat(e,"' is not valid."));var r=n.get(e),o=r.needsErrorMessage,i=r.messageGenerator,s=r.onButtonClicked;if(o&&!t)throw new Error("openAlertModal: Can't use '".concat(e,"' alert without 'errorMessage' parameter. ")+"Please pass an errorMessage parameter.");var a=i.bind(this)(t);this.insertModalIntoShadowRoot({type:"alert",text:a,onButtonClicked:s.bind(this)})}},{key:"safeOpenAlertModal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{this.openAlertModal(e,t)}catch(e){this.openAlertModal(this.alertCodes.UNEXPECTED_ERROR_GO_MENU,e.message)}}},{key:"insertModalIntoShadowRoot",value:function(e){var t=e.type,n=e.text,r=e.onButtonClicked,o=new Map([["input","input-modal"],["alert","alert-modal"]]);if(o.has(t)){var i=document.createElement(o.get(t)),s=document.createTextNode(n);return i.appendChild(s),i.addEventListener("button-clicked",(function(e){r(e)&&i.remove()})),this.shadowRoot.insertBefore(i,this.shadowRoot.firstChild),i}throw new Error("insertModalIntoShadowRoot: Invalid modal type ".concat(t,".")+"Please insert a valid modal type.")}},{key:"goToMenu",value:function(){return this.ownerDocument.defaultView.history.replaceState(null,"","menu"),!0}},{key:"closeModal",value:function(){return!0}},{key:"alertCodes",get:function(){return{HAS_NOT_VOTED:"has-not-voted",FIRST_ROUND_REACHED:"first-round-reached",EVALUATION_PERIOD_OVER:"evaluation-period-over",EVALUATION_PERIOD_NOT_STARTED:"evaluation-period-not-started",ALREADY_EVALUATED:"already-evaluated",NO_SONGS:"no-songs",EVALUATION_FAILED:"evaluation-failed",INVALID_SCORE:"invalid-score",VOTE_SUCCESS:"evaluation-success",SUBMISSION_PERIOD_OVER:"submission-period-over",MAX_NUMBER_OF_SONGS:"max-number-of-songs",INVALID_URL:"invalid-url",SUBMISSION_SUCCESS:"submission-success",DUPLICATED_SONG:"duplicated-song",UNEXPECTED_ERROR_GO_MENU:"unexpected-error-go-menu",UNEXPECTED_ERROR_CLOSE_MODAL:"unexpected-error-close-modal",SAVE_BOT_SETTINGS_ERROR:"save-bot-settings-error",SAVE_BOT_SETTINGS_SUCCESS:"save-bot-settings-success"}}}],[{key:"isPrototypeOfModalDisplayableMixin",get:function(){return!0}}]),c}(e)};var o=r(n(63)),i=r(n(64)),s=r(n(65)),a=r(n(66)),u=r(n(62))},70:function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(67)),i=r(n(63)),s=r(n(64)),a=r(n(65)),u=r(n(66)),c=r(n(62)),d=n(68);function l(){var e=(0,o.default)(["\n            .shell {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: space-between;\n                box-sizing: border-box;\n            }\n            @-webkit-keyframes slide-down {\n                  0% { opacity: 0; -webkit-transform: translate(-50%, -100%); }\n                100% { opacity: 1; -webkit-transform: translate(-50%, -50%); }\n            }\n            @-moz-keyframes slide-down {\n                  0% { opacity: 0; -moz-transform: translate(-50%, -100%); }\n                100% { opacity: 1; -moz-transform: translate(-50%, -50%); }\n            }\n            .backdrop {\n                position: fixed;\n                width: 100vw;\n                height: 100vh;\n                background-color: rgba(26, 26, 26, 0.7);\n                z-index: 1000;\n            }\n\n            .modal {\n                position: fixed;\n                left: 50%;\n                top: 50%;\n                transform: translate(-50%, -50%);\n                max-width: 300px;\n                width: 70%;\n                min-height: 150px;\n                max-height: 80vh;\n                overflow-y: auto;\n                background-color: #FBFBD3;\n                z-index: 1001;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: space-between;\n                border-radius: 3px;\n                padding: 25px;\n                text-align: center;\n                -webkit-animation: slide-down .3s ease-out;\n                -moz-animation: slide-down .3s ease-out;\n            }\n\n            .modal button {\n                width: 100px;\n                height: 35px;\n                text-transform: uppercase;\n                background-color: #FBC303;\n                font-weight: 900;\n                font-family: inherit;\n                border: none;\n                border-radius: 3px;\n                vertical-align: baseline;\n                cursor: pointer;\n            }\n        "]);return l=function(){return e},e}function f(){var e=(0,o.default)(['\n            <div class="shell">\n                <div class="backdrop"></div>\n                <div class="modal">\n                    <p><slot></slot></p>\n                    <button @click="','">ok</button>\n                </div>\n            </div>\n        ']);return f=function(){return e},e}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var p=function(e){(0,a.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"handleButtonClick",value:function(){var e=new CustomEvent("button-clicked",{bubbles:!0,composed:!0});this.dispatchEvent(e)}},{key:"render",value:function(){return(0,d.html)(f(),this.handleButtonClick)}}],[{key:"styles",get:function(){return(0,d.css)(l())}}]),n}(d.LitElement);t.default=p,customElements.define("alert-modal",p)},71:function(e,t,n){var r=n(78);function o(t,n,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=o=Reflect.get:e.exports=o=function(e,t,n){var o=r(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}},o(t,n,i||t)}e.exports=o},72:function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(67)),i=r(n(63)),s=r(n(64)),a=r(n(65)),u=r(n(66)),c=r(n(62)),d=n(68),l=r(n(73));function f(){var e=(0,o.default)(["\n        .shell {\n            position: relative;\n            box-sizing: border-box;\n            width: 100vw;\n            min-height: 100%;\n            min-width: 320px;\n            margin: 0;\n        }\n\n        .logo {\n            width: 160px;\n            height: 72px;\n            cursor: pointer;\n        }\n\n        router-link:active, router-link:focus {\n            border: none;\n            outline: none;\n        }\n\n        header {\n            z-index: 20;\n            position: fixed;\n            width: 100%;\n            height: 72px;\n            background-color: #FBC303;\n        }\n\n        header, section {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: space-between;\n        }\n\n        .yellow {\n            position: absolute;\n            z-index: -1;\n            top: 0;\n            left: 0;\n            right: 0;\n            margin: 0 auto;\n            width: 100%;\n            /* max-width: 600px; */\n            height: 30%;\n            max-height: 200px;\n            background-color: #FBC303;\n        }\n        .grey {\n            position: fixed;\n            z-index: -2;\n            top: 0;\n            left: 0;\n            right: 0;\n            margin: 0 auto;\n            width: 100%;\n            /* max-width: 600px; */\n            height: 100%;\n            background-color: #CCCCCC;\n        }\n\n        ::slotted(*:nth-of-type(1)){\n            margin-top: 100px;\n        }\n\n        ::slotted(*) {\n            position: relative;\n            z-index: 19;\n        }\n\n    "]);return f=function(){return e},e}function h(){var e=(0,o.default)(['\n        <section class="shell">\n            <header>\n                <router-link path="menu">\n                    <img class="logo" src=',' alt="song ballot"/>\n                </router-link>\n            </header>\n            <section class="yellow"></section>\n            <section class="grey"></section>\n            <slot></slot>\n        </section>\n    ']);return h=function(){return e},e}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var g=function(e){(0,a.default)(n,e);var t=p(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"render",value:function(){return(0,d.html)(h(),l.default)}}],[{key:"styles",get:function(){return(0,d.css)(f())}}]),n}(d.LitElement);t.default=g,window.customElements.define("default-background",g)},73:function(e,t,n){"use strict";n.r(t),t.default=n.p+"images/horizontal-logo.png"},74:function(e,t,n){"use strict";n.r(t),n.d(t,"observer",(function(){return o}));var r=n(1);function o(e){return class extends e{update(...e){let t;return this._mobxReaction.track(()=>{t=super.update(...e)}),t}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._mobxReaction=new r.c((this.constructor.name||this.nodeName)+".update()",()=>this.requestUpdate()),this.hasUpdated&&this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this._mobxReaction.dispose()}}}},75:function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,f.observer)(e);return function(e){(0,c.default)(g,e);var t,n,r,f,p=(t=g,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,l.default)(t);if(n){var o=(0,l.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,d.default)(this,e)});function g(){return(0,s.default)(this,g),p.apply(this,arguments)}return(0,a.default)(g,[{key:"firstUpdated",value:(f=(0,i.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,u.default)((0,l.default)(g.prototype),"firstUpdated",this).call(this,t),h.store.ongoingRound){e.next=4;break}return e.next=4,this.refreshOngoingRound();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"refreshOngoingRound",value:(r=(0,i.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.store.loadOngoingRound();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.safeOpenAlertModal(this.alertCodes.UNEXPECTED_ERROR_GO_MENU,"Ocorreu um erro ao carregar a rodada atual: ".concat(e.t0.message));case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return r.apply(this,arguments)})}]),g}(e.isPrototypeOfModalDisplayableMixin?t:(0,p.default)(t))};var o=r(n(18)),i=r(n(19)),s=r(n(63)),a=r(n(64)),u=r(n(71)),c=r(n(65)),d=r(n(66)),l=r(n(62)),f=n(74),h=n(29),p=r(n(69))},77:function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(67)),i=r(n(63)),s=r(n(64)),a=r(n(65)),u=r(n(66)),c=r(n(62)),d=n(68);function l(){var e=(0,o.default)(["\n        .shell {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: space-between;\n          box-sizing: border-box;\n        }\n        @-webkit-keyframes slide-down {\n            0% { opacity: 0; -webkit-transform: translate(-50%, -100%); }\n          100% { opacity: 1; -webkit-transform: translate(-50%, -50%); }\n        }\n        @-moz-keyframes slide-down {\n            0% { opacity: 0; -moz-transform: translate(-50%, -100%); }\n          100% { opacity: 1; -moz-transform: translate(-50%, -50%); }\n        }\n        .backdrop {\n          position: fixed;\n          width: 100vw;\n          height: 100vh;\n          background-color: rgba(26, 26, 26, 0.7);\n          z-index: 1000;\n        }\n\n        .modal {\n          position: fixed;\n          left: 50%;\n          top: 50%;\n          transform: translate(-50%, -50%);\n          max-width: 300px;\n          width: 70%;\n          min-height: 200px;\n          max-height: 80vh;\n          overflow-y: auto;\n          background-color: #FBFBD3;\n          z-index: 1001;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: space-between;\n          border-radius: 3px;\n          padding: 25px;\n          text-align: center;\n          -webkit-animation: slide-down .3s ease-out;\n          -moz-animation: slide-down .3s ease-out;\n        }\n\n        .modal button {\n          width: 100px;\n          height: 35px;\n          text-transform: uppercase;\n          background-color: #FBC303;\n          font-weight: 900;\n          font-family: inherit;\n          border: none;\n          border-radius: 3px;\n          vertical-align: baseline;\n          cursor: pointer;\n        }\n\n        input {\n          height: 1.5em;\n          width: calc(100% - 4px);\n          border-radius: 3px;\n          margin-bottom: 1em;\n          font-family: inherit;\n          border-style: solid;\n          border-width: 1px;\n          font-size: 1em;\n          background-color: #F2F2F2;\n        }\n    "]);return l=function(){return e},e}function f(){var e=(0,o.default)(['\n            <div class="shell" >\n                <div class="backdrop"></div>\n                <div class="modal">\n                    <p><slot></slot></p>\n                    <input type="text" @input="','"/>\n                    <button @click="','">ok</button>\n                </div>\n            </div>\n        ']);return f=function(){return e},e}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var o=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.default)(this,n)}}var p=function(e){(0,a.default)(n,e);var t=h(n);function n(){return(0,i.default)(this,n),t.apply(this,arguments)}return(0,s.default)(n,[{key:"handleClick",value:function(){var e=new CustomEvent("button-clicked",{detail:{inputText:this.inputText},bubbles:!0,composed:!0});this.dispatchEvent(e)}},{key:"handleTextInput",value:function(e){this.inputText=e.target.value}},{key:"render",value:function(){return(0,d.html)(f(),this.handleTextInput,this.handleClick)}}],[{key:"styles",get:function(){return(0,d.css)(l())}}]),n}(d.LitElement);t.default=p,customElements.define("input-modal",p)},78:function(e,t,n){var r=n(62);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e}},79:function(e,t,n){var r=n(30),o=n(80),i=n(23),s=n(31);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||s()}},80:function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}},85:function(e,t,n){"use strict";var r=n(5);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(e){(0,l.default)(C,e);var t,n,r,v,b,y,k,S,x,R,E,w=(t=C,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,h.default)(t);if(n){var o=(0,h.default)(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return(0,f.default)(this,e)});function C(){var e;return(0,u.default)(this,C),(e=w.call(this)).userSubmissionsLimit=0,e.isLoading=!0,e.hasOngoingRequest=!1,e.startDateString="",e.endTimeString="",e.endWeekdayString="",e}return(0,d.default)(C,null,[{key:"properties",get:function(){return{videoId:{type:String},hasOngoingRequest:{type:Boolean},videoTitle:{type:String},isLoading:{type:Boolean},userSubmissionsSent:{type:Number},userSubmissionsLimit:{type:Number}}}}]),(0,d.default)(C,[{key:"firstUpdated",value:(E=(0,a.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.default)((0,h.default)(C.prototype),"firstUpdated",this).call(this,t);case 2:this.setupAndCheckPageBasedOnOngoingRound(),this.isLoading=!1;case 4:case"end":return e.stop()}}),e,this)}))),function(e){return E.apply(this,arguments)})},{key:"setupAndCheckPageBasedOnOngoingRound",value:function(){this.updatePageBaseVariables();var e=this.checkForErrors(this.getCheckFunctionsMap());return e?(this.safeOpenAlertModal(e),e):null}},{key:"updatePageBaseVariables",value:function(){var e=m.store.ongoingRound,t=e.submissionsStartAt,n=e.submissionsEndAt;this.setDateStrings(t,n),this.defineUserSubmissionLimit(),this.defineUserSubmissionsSent()}},{key:"getCheckFunctionsMap",value:function(){var e=m.store.ongoingRound.submissionsEndAt;return new Map([[this.checkSubmissionsEnded(e),this.alertCodes.SUBMISSION_PERIOD_OVER],[this.checkUserSubmissionsLimit(),this.alertCodes.MAX_NUMBER_OF_SONGS]])}},{key:"checkForErrors",value:function(e){var t=Array.from(e.entries()).find((function(e){return!0===(0,(0,i.default)(e,1)[0])()}))||[];return(0,i.default)(t,2)[1]}},{key:"setDateStrings",value:function(e,t){this.startDateString=e.toLocaleDateString(),this.endTimeString=t.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"}),this.endWeekdayString=t.toLocaleString(void 0,{weekday:"long"})}},{key:"checkSubmissionsEnded",value:function(e){return function(){return Date.now()>e}}},{key:"defineUserSubmissionLimit",value:function(){var e;(null===(e=m.store.ongoingRound.lastWinner)||void 0===e?void 0:e.id)===m.store.currentUser.id?this.userSubmissionsLimit=2:this.userSubmissionsLimit=1}},{key:"defineUserSubmissionsSent",value:function(){var e=Array.from(m.store.ongoingRound.submissions.values()).filter((function(e){return e.submitter.id===m.store.currentUser.id}));this.userSubmissionsSent=e.length}},{key:"checkUserSubmissionsLimit",value:function(){var e=this;return function(){return e.userSubmissionsSent>=e.userSubmissionsLimit}}},{key:"handleConfirmationClick",value:(R=(0,a.default)(s.default.mark((function e(){var t;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.hasOngoingRequest=!0,t=this.getVideoId(),e.next=4,this.safeSetVideoTitle(t);case 4:this.hasOngoingRequest=!1;case 5:case"end":return e.stop()}}),e,this)}))),function(){return R.apply(this,arguments)})},{key:"getVideoId",value:function(){var e=this.shadowRoot.querySelector("input[type=url]").value;return this.parseYoutubeVideoId(e)}},{key:"safeSetVideoTitle",value:(x=(0,a.default)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,this.getVideoTitle(t);case 3:n=e.sent,this.videoTitle=n,this.videoId=t,e.next=9;break;case 8:this.safeOpenAlertModal(this.alertCodes.INVALID_URL);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return x.apply(this,arguments)})},{key:"getVideoTitle",value:(S=(0,a.default)(s.default.mark((function e(t){var n,r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.fetchYoutubeVideoTitle)(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,this.getManualVideoTitle();case 11:return r=e.sent,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return S.apply(this,arguments)})},{key:"getManualVideoTitle",value:function(){var e=this,t=function(e){return function(t){var n=(null==t?void 0:t.detail).inputText;return!!n&&(e(n),!0)}};return new Promise((function(n){e.insertModalIntoShadowRoot({type:"input",text:"Houve um problema ao carregar o título do vídeo. Digite o título manualmente e carregue o vídeo mais uma vez.",onButtonClicked:t(n)})}))}},{key:"parseYoutubeVideoId",value:function(e){var t=e.match(/.*youtu\.be\/([^&]*).*$/)||e.match(/.*youtube\.com\/watch\?v=([^&]*).*$/);return t&&t[1]||null}},{key:"handleSendVideoClick",value:(k=(0,a.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.hasOngoingRequest=!0,e.prev=1,e.next=4,this.isNewSong(this.videoId);case 4:if(!e.sent){e.next=11;break}return e.next=8,this.performVideoSubmission();case 8:this.safeOpenAlertModal(this.alertCodes.SUBMISSION_SUCCESS),e.next=12;break;case 11:this.safeOpenAlertModal(this.alertCodes.DUPLICATED_SONG);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),this.safeOpenAlertModal(this.alertCodes.UNEXPECTED_ERROR_CLOSE_MODAL,e.t0.message);case 17:this.hasOngoingRequest=!1;case 18:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(){return k.apply(this,arguments)})},{key:"isNewSong",value:(y=(0,a.default)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.store.songs.get(t)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,this.isSongInDb(t);case 5:return n=e.sent,e.abrupt("return",!n);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"isSongInDb",value:(b=(0,a.default)(s.default.mark((function e(t){var n;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.db.collection("groups").doc(m.store.currentGroup).collection("songs").doc(t).get();case 2:return n=e.sent,e.abrupt("return",n.exists);case 4:case"end":return e.stop()}}),e)}))),function(e){return b.apply(this,arguments)})},{key:"performVideoSubmission",value:(v=(0,a.default)(s.default.mark((function e(){var t,n,r,o,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.refreshOngoingRound();case 2:if(!this.setupAndCheckPageBasedOnOngoingRound()){e.next=5;break}return e.abrupt("return");case 5:return t=this.generateVideoAndSubmissionModels({videoId:this.videoId,videoURL:this.videoURL,videoTitle:this.videoTitle}),n=t.songModel,r=t.submissionModel,o=(0,p.getSnapshot)(n),i=(0,p.getSnapshot)(r),e.next=10,this.persistData(o,i);case 10:this.updateStore(o,i),this.userSubmissionsSent+=1;case 12:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"generateVideoAndSubmissionModels",value:function(e){var t=e.videoId,n=e.videoURL,r=e.videoTitle;return{songModel:m.store.createSongModel({videoId:t,videoURL:n,videoTitle:r}),submissionModel:m.store.createSubmissionModel(t)}}},{key:"updateStore",value:function(e,t){m.store.addSong(e),m.store.addSubmission(t),m.store.ongoingRound.addSong(e.id),m.store.ongoingRound.addSubmission(t.id)}},{key:"persistData",value:(r=(0,a.default)(s.default.mark((function e(t,n){var r,o,i;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getSongReference(t.id),o=this.getSubmissionReference(n.id),i=this.getRoundReference(m.store.ongoingRound.id),e.next=5,g.db.runTransaction(this.sendSongTransaction({roundReference:i,submissionReference:o,songReference:r,submission:n,song:t}));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"sendSongTransaction",value:function(e){var t=this,n=e.roundReference,r=e.submissionReference,o=e.submission,i=e.songReference,u=e.song;return function(){var e=(0,a.default)(s.default.mark((function e(a){var c,d,l;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.get(n);case 2:return c=e.sent,d=t.getUpdatedSongIds(c,u.id),l=t.getUpdatedSubmissionsIds(c,o.id),e.next=7,a.set(i,u);case 7:return e.next=9,a.set(r,o);case 9:return e.next=11,a.update(n,{songs:d,submissions:l});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},{key:"getUpdatedSongIds",value:function(e,t){var n=e.data().songs||[];return[].concat((0,o.default)(n),[t])}},{key:"getUpdatedSubmissionsIds",value:function(e,t){var n=e.data().submissions||[];return[].concat((0,o.default)(n),[t])}},{key:"getRoundReference",value:function(e){return this.groupReference.collection("rounds").doc(e).withConverter(g.DateConverter)}},{key:"getSubmissionReference",value:function(e){return this.groupReference.collection("submissions").doc(e).withConverter(g.DateConverter)}},{key:"getSongReference",value:function(e){return this.groupReference.collection("songs").doc(e).withConverter(g.DateConverter)}},{key:"groupReference",get:function(){return g.db.collection("groups").doc(m.store.currentGroup)}},{key:"videoURL",get:function(){return"https://www.youtube.com/embed/".concat(this.videoId)}}]),C}(e)};var o=r(n(10)),i=r(n(79)),s=r(n(18)),a=r(n(19)),u=r(n(63)),c=r(n(71)),d=r(n(64)),l=r(n(65)),f=r(n(66)),h=r(n(62)),p=n(6),g=n(22),m=n(29)}}]);